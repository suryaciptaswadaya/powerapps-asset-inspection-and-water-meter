mtrScreenInput As screen:

    Rectangle1_1 As rectangle:
        Fill: =RGBA(0, 106, 59, 1)
        Width: =640
        ZIndex: =1

    BarcodeScanner1 As barcodeScanner:
        BarcodeType: =BarcodeType.QRCode
        Fill: =RGBA(0, 106, 59, 1)
        Height: =70
        OnScan: =Set(varScan, BarcodeScanner1.Value)
        Size: =24
        Text: ="Scan"
        Width: =126
        X: =489
        Y: =150
        ZIndex: =2

    mtr_ID As text:
        BorderColor: =RGBA(0, 106, 59, 1)
        Default: =varScan
        Height: =70
        Size: =21
        Width: =446
        X: =15
        Y: =150
        ZIndex: =3

    Label2 As label:
        Height: =70
        Size: =21
        Text: |-
            ="Meter ID :"
        Width: =560
        X: =15
        Y: =100
        ZIndex: =4

    Label3 As label:
        Height: =70
        Size: =21
        Text: |-
            ="Current Meter :"
        Width: =560
        X: =15
        Y: =251
        ZIndex: =5

    current_mtr As text:
        BorderColor: =RGBA(0, 106, 59, 1)
        Default: =""
        Format: =TextFormat.Number
        Height: =70
        Size: =21
        Width: =600
        X: =15
        Y: =321
        ZIndex: =6

    date_mtr As datepicker:
        BorderColor: =RGBA(0, 106, 59, 1)
        Height: =70
        IconBackground: |-
            =RGBA(0, 106, 59
            , 1)
        Size: =24
        Width: =600
        X: =17
        Y: =487
        ZIndex: =7

    Label4 As label:
        Height: =70
        Size: =21
        Text: |-
            ="Date :"
        Width: =560
        X: =15
        Y: =404
        ZIndex: =8

    btn_submit As button:
        BorderColor: =RGBA(255, 255, 255, 1)
        Fill: =RGBA(0, 106, 59, 1)
        Height: =70
        OnSelect: |-
            =//Collect(CollitemsToKeep,{MtrID:mtr_ID.Text,CurrMtr:current_mtr.Text,Date:date_mtr.SelectedDate});
            //SaveData(CollitemsToKeep,"SaveToDevice");
            
            Set(BinaryImageDataMetering, Substitute(JSON(UploadedImage1.Image, JSONFormat.IncludeBinaryData),"",""));
            Set(s_Base64ContentMetering, Mid(BinaryImageDataMetering, Find(",", BinaryImageDataMetering) + 1, Len(BinaryImageDataMetering) - Find(",", BinaryImageDataMetering) - 1));
            Set(v_UploadResult, '[DEV]UploadImage-WaterMeter'.Run(Concatenate(mtr_ID.Text,"-",Value(current_mtr.Text),"-metering.jpg"), s_Base64ContentMetering,Concatenate("/gal_metering/",mtr_ID.Text)));
            Set(s_ImageLinkMetering, v_UploadResult.sharepointfilelink);
            
            /*
            Set(BinaryImageDataMetering, Substitute(JSON(UploadedImage1.Image, JSONFormat.IncludeBinaryData), "",""));
            Set(s_Base64ContentMetering,
                Mid(
                    BinaryImageDataMetering,
                    Find(",",BinaryImageDataMetering) + 1,
                    Len(BinaryImageDataMetering) - Find(",",BinaryImageDataMetering) - 1
                )
            );
            Set(s_ImageLinkMetering,
                '[DEV]-UploadImageWaterMeter'.Run(
                    Concatenate("/gal_metering/",mtr_ID.Text),
                    Concatenate(mtr_ID.Text,"-",Value(current_mtr.Text),"-metering.jpg"),
                    s_Base64ContentMetering        
                ).sharepointfilelink
            );
            */
            Patch(
                tbl_metering_logs,
                Defaults(tbl_metering_logs),
                    {
                        meter_id:mtr_ID.Text,
                        current_meter: Value(current_mtr.Text),
                        url_image:s_ImageLinkMetering
                    }
                );
            
                Notify("Data Metering Berhasil Disimpan");
            
            Navigate(Home);
        Size: =24
        Text: ="Submit"
        Width: =350
        X: =139
        Y: =986
        ZIndex: =12

    back As icon.BackArrow:
        BorderColor: =RGBA(255, 255, 255, 1)
        Color: =RGBA(255, 255, 255, 1)
        Icon: =Icon.BackArrow
        OnSelect: =Navigate(Home);
        X: =17
        Y: =18
        ZIndex: =14

    AddMediaWithImage1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =15

        UploadedImage1 As image:
            Height: =AddMediaButton1.Height
            Image: =If(IsBlank(AddMediaButton1.Media), SampleImage, AddMediaButton1.Media)
            ImagePosition: =ImagePosition.Fill
            Width: =AddMediaButton1.Width
            X: =AddMediaButton1.X
            Y: =AddMediaButton1.Y
            ZIndex: =16

        AddMediaButton1 As addMedia:
            Height: =268
            Size: =25
            Width: =575
            X: =29
            Y: =624
            ZIndex: =17

